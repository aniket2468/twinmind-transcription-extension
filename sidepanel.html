<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Audio Transcription</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>Audio Transcription</h1>
      <div class="status-indicator" id="statusIndicator">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">Ready</span>
      </div>
    </header>

    <!-- API Key Configuration -->
    <div class="api-config" id="apiConfig">
      <div class="config-header">
        <h3>API Configuration</h3>
        <button class="btn btn-small" id="toggleConfig">
          <span class="btn-icon">⚙️</span>
          Configure
        </button>
      </div>
      <div class="config-content" id="configContent" style="display: none;">
        <div class="config-item">
          <label for="geminiKey">Google Gemini API Key (Optional)</label>
          <input type="password" id="geminiKey" placeholder="Enter your Gemini API key for better accuracy">
          <button class="btn btn-small" id="saveKey">Save</button>
        </div>
        <div class="config-hint">
          <small>Get your free API key from <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a></small>
        </div>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <button class="btn btn-primary" id="startBtn">
        <span class="btn-icon">🎤</span>
        Start Recording
      </button>
      <button class="btn btn-secondary" id="pauseBtn" disabled>
        <span class="btn-icon">⏸️</span>
        Pause
      </button>
      <button class="btn btn-secondary" id="resumeBtn" disabled>
        <span class="btn-icon">▶️</span>
        Resume
      </button>
      <button class="btn btn-danger" id="stopBtn" disabled>
        <span class="btn-icon">⏹️</span>
        Stop Recording
      </button>
    </div>

    <!-- Session Info -->
    <div class="session-info" id="sessionInfo" style="display: none;">
      <div class="timer" id="timer">00:00:00</div>
      <div class="tab-info" id="tabInfo">
        <span class="tab-icon">🖥️</span>
        <span id="tabTitle">Current Tab</span>
      </div>
    </div>

    <!-- Transcription Display -->
    <div class="transcription-container">
      <div class="transcription-header">
        <h3>Transcription</h3>
        <div class="transcription-controls">
          <button class="btn btn-small" id="copyBtn" disabled>
            <span class="btn-icon">📋</span>
            Copy
          </button>
          <button class="btn btn-small" id="downloadBtn" disabled>
            <span class="btn-icon">💾</span>
            Download TXT
          </button>
          <button class="btn btn-small" id="downloadJsonBtn" disabled>
            <span class="btn-icon">📄</span>
            Download JSON
          </button>
          <button class="btn btn-small btn-danger" id="clearBtn" disabled>
            <span class="btn-icon">🗑️</span>
            Clear
          </button>
        </div>
      </div>
      
      <div class="transcription-content" id="transcriptionContent">
        <div class="placeholder" id="placeholder">
          <div class="placeholder-icon">🎵</div>
          <div class="placeholder-text">Ready to transcribe audio</div>
          <div class="placeholder-hint">Click "Start Recording" to begin capturing audio from your current tab</div>
        </div>
      </div>
    </div>

    <!-- Error Display -->
    <div class="error-container" id="errorContainer" style="display: none;">
      <div class="error-content">
        <span class="error-icon">⚠️</span>
        <span class="error-text" id="errorText"></span>
        <button class="error-close" id="errorClose">×</button>
      </div>
    </div>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>